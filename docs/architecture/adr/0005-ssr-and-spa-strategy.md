# ADR 0005 — Стратегия SSR и переход к SPA

- **Дата**: 2025-11-07
- **Статус**: Утверждено
- **Контекст**: Требуется сохранить возможность SSR-страниц без немедленной разработки SPA, но обеспечить API-first для будущих UI клиентов.

## Решение
- Реализовать минимальные SSR-страницы (NestJS + server-side templates) поверх REST API.
- Вся бизнес-логика реализуется в API; SSR использует публичные API (через внутреннего клиента) без прямого доступа к БД.
- Подготовить OpenAPI-спецификацию и client SDK, чтобы в будущем создать SPA без изменения API.

## Обоснование
- SSR обеспечивает быстрый старт и SEO дружелюбность.
- API-first гарантирует, что UI можно заменить (SPA, мобильное приложение) без переписывания бэкенда.
- Повторное использование OpenAPI для генерации клиента сократит время миграции на SPA.

## Рассмотренные альтернативы
| Вариант | Плюсы | Минусы |
|---------|-------|--------|
| Немедленный переход на SPA | Богатый UX | Увеличивает time-to-market, требует дополнительных ресурсов (bundler, state management, API gateway). |
| Полный SSR без API | Простой стек | Нарушает требование API-first, усложняет будущие интеграции. |

## Последствия
- SSR слой должен быть тонким и использовать REST клиент (`packages/shared/api-client`).
- Нужно документировать API и контролировать версионирование контрактов.
- При переходе на SPA следует обеспечить backward compatibility (версионирование API).
